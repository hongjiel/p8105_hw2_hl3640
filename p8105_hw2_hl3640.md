Homework 2
================
Hongjie Liu

Load package `tidyverse` for homework 2.

``` r
library(tidyverse)
```

## Problem 1

Read and clean the data; retain line, station, name, station latitude /
longitude, routes served, entry, vending, entrance type, and ADA
compliance. Convert the entry variable from character (`YES` vs `NO`) to
a logical variable.

``` r
transit_df_original = read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv")
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
transit_df = transit_df_original %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
```

The variables that the original dataset contains are
`Division, Line, Station Name, Station Latitude, Station Longitude, Route1, Route2, Route3, Route4, Route5, Route6, Route7, Route8, Route9, Route10, Route11, Entrance Type, Entry, Exit Only, Vending, Staffing, Staff Hours, ADA, ADA Notes, Free Crossover, North South Street, East West Street, Corner, Entrance Latitude, Entrance Longitude, Station Location, Entrance Location`.

First, We read the data from the csv file
“NYC_Transit_Subway_Entrance_And_Exit_Data.csv”. Next, we use the
function `janitor::clean_names` to clean up variable names. Last, We use
the functions `recode` and `mutate` to convert the entry variable from
character (`YES` vs `NO`) to a logical variable.

The resulting dataset has 1868 rows and 19 columns.

These data are still not tidy, because the values of the variables
`route8` to `route11` is numeric and should be converted to character,
and route number and route name are not distinct variables.

``` r
stnum = transit_df %>% 
  select(station_name, line) %>% 
  distinct %>% 
  count
```

There are 465 distinct stations.

``` r
stnum_ada = transit_df %>% 
  filter(ada == TRUE) %>% 
  select(station_name, line) %>% 
  distinct %>% 
  count
```

84 stations are ADA compliant.

``` r
total = transit_df %>% 
  filter(vending == "NO") %>% 
  pull(entry)
  
entrynum = sum(total == TRUE)
exitnum = sum(total == FALSE)
```

The ratio of entrances to exits with no vending allow entrance is
1:1.65.

Reformat data so that route number and route name are distinct
variables.

``` r
transit_df$route8 = as.character(transit_df$route8)
transit_df$route9 = as.character(transit_df$route9)
transit_df$route10 = as.character(transit_df$route10)
transit_df$route11 = as.character(transit_df$route11)

transit_df = transit_df %>% 
  pivot_longer(
    route1:route11,
    names_to = "route_number",
    values_to = "route_name") %>% 
  mutate(route_number = str_replace(route_number, "route", ""))
```

``` r
stnum_a = transit_df %>% 
  filter(route_name == "A") %>% 
  select(station_name, line) %>% 
  distinct %>% 
  count

stnum_a_ada = transit_df %>% 
  filter(route_name == "A", ada == TRUE) %>% 
  select(station_name, line) %>% 
  distinct %>% 
  count
```

60 stations serve the A train, of which 17 are ADA compliant.
